
<!doctype html>
<html lang="en" class="no-js">
  <head>

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">

        <meta name="description" content="Devtools Protocol implementation for chrome.">



        <link rel="canonical" href="https://github.com/plotly/choreographer/">



        <link rel="next" href="api/choreographer/">


      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">



        <title>choreographer</title>



      <link rel="stylesheet" href="assets/stylesheets/main.6f8fc17f.min.css">












        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>



      <link rel="stylesheet" href="css/api.css">

    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>






  </head>


    <body dir="ltr">


    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">


        <a href="#choreographer" class="md-skip">
          Skip to content
        </a>

    </div>
    <div data-md-component="announce">

    </div>






<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="choreographer" class="md-header__button md-logo" aria-label="choreographer" data-md-component="logo">


  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">

      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            choreographer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">

              Readme

          </span>
        </div>
      </div>
    </div>


      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>




      <div class="md-header__source">
        <a href="https://github.com/plotly/choreographer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    github
  </div>
</a>
      </div>

  </nav>

</header>

    <div class="md-container" data-md-component="container">






      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">



              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="choreographer" class="md-nav__button md-logo" aria-label="choreographer" data-md-component="logo">


  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    choreographer
  </label>

    <div class="md-nav__source">
      <a href="https://github.com/plotly/choreographer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    github
  </div>
</a>
    </div>

  <ul class="md-nav__list" data-md-scrollfix>









    <li class="md-nav__item md-nav__item--active">

      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">





        <label class="md-nav__link md-nav__link--active" for="__toc">


  <span class="md-ellipsis">
    Readme
  </span>


          <span class="md-nav__icon md-icon"></span>
        </label>

      <a href="." class="md-nav__link md-nav__link--active">


  <span class="md-ellipsis">
    Readme
  </span>


      </a>



<nav class="md-nav md-nav--secondary" aria-label="Table of contents">






    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#waiti-thought-this-was-kaleido" class="md-nav__link">
    <span class="md-ellipsis">
      Waitâ€”I Thought This Was Kaleido?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    <span class="md-ellipsis">
      Status
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing
    </span>
  </a>

    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#process-control-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Process Control Tests
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#browser-interaction-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Browser Interaction Tests
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#writing-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Writing Tests
    </span>
  </a>

</li>

      </ul>
    </nav>

</li>

        <li class="md-nav__item">
  <a href="#help-wanted" class="md-nav__link">
    <span class="md-ellipsis">
      Help Wanted
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#quickstart-with-asyncio" class="md-nav__link">
    <span class="md-ellipsis">
      Quickstart with asyncio
    </span>
  </a>

    <nav class="md-nav" aria-label="Quickstart with asyncio">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#subscribing-to-events" class="md-nav__link">
    <span class="md-ellipsis">
      Subscribing to Events
    </span>
  </a>

</li>

      </ul>
    </nav>

</li>

        <li class="md-nav__item">
  <a href="#synchronous-use" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronous Use
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#low-level-use" class="md-nav__link">
    <span class="md-ellipsis">
      Low-Level Use
    </span>
  </a>

</li>

    </ul>

</nav>

    </li>









    <li class="md-nav__item">
      <a href="api/choreographer/" class="md-nav__link">


  <span class="md-ellipsis">
    User API
  </span>


      </a>
    </li>

















    <li class="md-nav__item md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >


          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">


  <span class="md-ellipsis">
    Developer API
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Developer API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>































    <li class="md-nav__item md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >



          <div class="md-nav__link md-nav__container">
            <a href="api/choreographer/" class="md-nav__link ">


  <span class="md-ellipsis">
    choreographer
  </span>


            </a>


              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>

          </div>

        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            choreographer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>









    <li class="md-nav__item">
      <a href="api/choreographer.errors/" class="md-nav__link">


  <span class="md-ellipsis">
    errors
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="api/choreographer.browser_sync/" class="md-nav__link">


  <span class="md-ellipsis">
    browser_sync
  </span>


      </a>
    </li>






















    <li class="md-nav__item md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_4" >



          <div class="md-nav__link md-nav__container">
            <a href="api/choreographer.browsers/" class="md-nav__link ">


  <span class="md-ellipsis">
    browsers
  </span>


            </a>


              <label class="md-nav__link " for="__nav_3_1_4" id="__nav_3_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>

          </div>

        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_4">
            <span class="md-nav__icon md-icon"></span>
            browsers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>









    <li class="md-nav__item">
      <a href="api/choreographer.browsers.chromium/" class="md-nav__link">


  <span class="md-ellipsis">
    chromium
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>










    <li class="md-nav__item">
      <a href="api/choreographer.utils/" class="md-nav__link">


  <span class="md-ellipsis">
    utils
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="api/choreographer.cli/" class="md-nav__link">


  <span class="md-ellipsis">
    cli
  </span>


      </a>
    </li>






















    <li class="md-nav__item md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_7" >



          <div class="md-nav__link md-nav__container">
            <a href="api/choreographer.protocol/" class="md-nav__link ">


  <span class="md-ellipsis">
    protocol
  </span>


            </a>


              <label class="md-nav__link " for="__nav_3_1_7" id="__nav_3_1_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>

          </div>

        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_7">
            <span class="md-nav__icon md-icon"></span>
            protocol
          </label>
          <ul class="md-nav__list" data-md-scrollfix>









    <li class="md-nav__item">
      <a href="api/choreographer.protocol.sync/" class="md-nav__link">


  <span class="md-ellipsis">
    sync
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>






















    <li class="md-nav__item md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_8" >



          <div class="md-nav__link md-nav__container">
            <a href="api/choreographer.channels/" class="md-nav__link ">


  <span class="md-ellipsis">
    channels
  </span>


            </a>


              <label class="md-nav__link " for="__nav_3_1_8" id="__nav_3_1_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>

          </div>

        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_8">
            <span class="md-nav__icon md-icon"></span>
            channels
          </label>
          <ul class="md-nav__list" data-md-scrollfix>









    <li class="md-nav__item">
      <a href="api/choreographer.channels.pipe/" class="md-nav__link">


  <span class="md-ellipsis">
    pipe
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>




          </ul>
        </nav>

    </li>




          </ul>
        </nav>

    </li>



  </ul>
</nav>
                  </div>
                </div>
              </div>



              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">






    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#waiti-thought-this-was-kaleido" class="md-nav__link">
    <span class="md-ellipsis">
      Waitâ€”I Thought This Was Kaleido?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    <span class="md-ellipsis">
      Status
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing
    </span>
  </a>

    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#process-control-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Process Control Tests
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#browser-interaction-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Browser Interaction Tests
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#writing-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Writing Tests
    </span>
  </a>

</li>

      </ul>
    </nav>

</li>

        <li class="md-nav__item">
  <a href="#help-wanted" class="md-nav__link">
    <span class="md-ellipsis">
      Help Wanted
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#quickstart-with-asyncio" class="md-nav__link">
    <span class="md-ellipsis">
      Quickstart with asyncio
    </span>
  </a>

    <nav class="md-nav" aria-label="Quickstart with asyncio">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#subscribing-to-events" class="md-nav__link">
    <span class="md-ellipsis">
      Subscribing to Events
    </span>
  </a>

</li>

      </ul>
    </nav>

</li>

        <li class="md-nav__item">
  <a href="#synchronous-use" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronous Use
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#low-level-use" class="md-nav__link">
    <span class="md-ellipsis">
      Low-Level Use
    </span>
  </a>

</li>

    </ul>

</nav>
                  </div>
                </div>
              </div>



            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">




<h1 id="choreographer">Choreographer</h1>
<p>choreographer allows remote control of browsers from Python.
It was created to support image generation from browser-based charting tools,
but can be used for other purposes as well.</p>
<h2 id="waiti-thought-this-was-kaleido">Waitâ€”I Thought This Was Kaleido?</h2>
<p><a href="https://pypi.org/project/kaleido/">Kaleido</a> is a cross-platform library for generating static images of plots.
The original implementation included a custom build of Chrome,
which has proven very difficult to maintain.
In contrast,
this package uses the Chrome binary on the user's machine
in the same way as testing tools like <a href="https://pptr.dev/">Puppeteer</a>;
the next step is to re-implement Kaleido as a layer on top of it.</p>
<h2 id="status">Status</h2>
<p>choreographer is a work in progress:
only Chrome-ish browsers are supported at the moment,
though we hope to add others.
(Pull requests are greatly appreciated.)</p>
<p>Note that we strongly recommend using async/await with this package,
but it is not absolutely required.
The synchronous functions in this package are intended as building blocks
for other asynchronous strategies that Python may favor over async/await in the future.</p>
<h2 id="testing">Testing</h2>
<h3 id="process-control-tests">Process Control Tests</h3>
<ul>
<li>Verbose: <code>pytest -W error -n auto -vvv -rA --capture=tee-sys tests/test_process.py</code></li>
<li>Quiet:<code>pytest -W error -n auto -v -rFe --capture=fd tests/test_process.py</code></li>
</ul>
<h3 id="browser-interaction-tests">Browser Interaction Tests</h3>
<ul>
<li>Verbose: <code>pytest --debug -n auto -W error -vvv -rA --capture=tee-sys --ignore=tests/test_process.py</code></li>
<li>Quiet :<code>pytest -W error -n auto -v -rFe --capture=fd --ignore=tests/test_process.py</code></li>
</ul>
<p>You can also add "--no-headless" to these if you want to see the browser pop up.</p>
<h3 id="writing-tests">Writing Tests</h3>
<ul>
<li>Put async and sync tests in different files. Add <code>_sync.py</code> to synchronous tests.</li>
<li>For process tests, use the same decorators/fixtures like <code>test_process.py</code> file.</li>
<li>For API tests, use <code>test_placeholder.py</code> as the minimum template.</li>
</ul>
<h2 id="help-wanted">Help Wanted</h2>
<p>We need your help to test this package on different platforms
and for different use cases.
To get started:</p>
<ol>
<li>Clone this repository.</li>
<li>Create and activate a Python virtual environment.</li>
<li>Install this repository using <code>pip install .</code> or the equivalent.</li>
<li>Run <code>dtdoctor</code> and paste the output into an issue in this repository.</li>
</ol>
<h2 id="quickstart-with-asyncio">Quickstart with <code>asyncio</code></h2>
<p>Save the following code to <code>example.py</code> and run with Python.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>import asyncio
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>import choreographer as choreo
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>async def example():
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    browser = await choreo.Browser(headless=False)
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    tab = await browser.create_tab(&quot;https://google.com&quot;)
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    await asyncio.sleep(3)
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    await tab.send_command(&quot;Page.navigate&quot;, params={&quot;url&quot;: &quot;https://github.com&quot;})
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    await asyncio.sleep(3)
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>if __name__ == &quot;__main__&quot;:
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    asyncio.run(example())
</span></code></pre></div>
<p>Step by step, this example:</p>
<ol>
<li>Imports the required libraries.</li>
<li>Defines an <code>async</code> function
    (because <code>await</code> can only be used inside <code>async</code> functions).</li>
<li>Asks choreographer to create a browser.
    <code>headless=False</code> tells it to display the browser on the screen;
    the default is no display.</li>
<li>Wait three seconds for the browser to be created.</li>
<li>Create another tab.
    (Note that users can't rearrange programmatically-generated tabs using the mouse,
    but that's OK: we're not trying to replace testing tools like <a href="https://pptr.dev/">Puppeteer</a>.)</li>
<li>Sleep again.</li>
<li>Runs the example function.</li>
</ol>
<p>See <a href="https://chromedevtools.github.io/devtools-protocol/">the devtools reference</a> for a list of possible commands.</p>
<h3 id="subscribing-to-events">Subscribing to Events</h3>
<p>Try adding the following to the example shown above:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>    <span class="c1"># Callback for printing result</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dump_event</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>        <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    <span class="c1"># Callback for raising result as error</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">error_event</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>    <span class="n">browser</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;Target.targetCrashed&quot;</span><span class="p">,</span> <span class="n">error_event</span><span class="p">)</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    <span class="n">new_tab</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;Page.loadEventFired&quot;</span><span class="p">,</span> <span class="n">dump_event</span><span class="p">)</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>    <span class="n">browser</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;Target.*&quot;</span><span class="p">,</span> <span class="n">dump_event</span><span class="p">)</span> <span class="c1"># dumps all &quot;Target&quot; events</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">new_tab</span><span class="o">.</span><span class="n">subscribe_once</span><span class="p">(</span><span class="s2">&quot;Page.lifecycleEvent&quot;</span><span class="p">)</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    <span class="c1"># do something with response</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>    <span class="n">browser</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="s2">&quot;Target.*&quot;</span><span class="p">)</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    <span class="c1"># events are always sent to a browser or tab,</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>    <span class="c1"># but the documentation isn&#39;t always clear which.</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>    <span class="c1"># Dumping all: `browser.subscribe(&quot;*&quot;, dump_event)` (on tab too)</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>    <span class="c1"># can be useful (but verbose) for debugging.</span>
</span></code></pre></div>
<h2 id="synchronous-use">Synchronous Use</h2>
<p>You can use this library without <code>asyncio</code>,</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>my_browser = choreo.Browser() # blocking until open
</span></code></pre></div>
<p>However, you must call <code>browser.pipe.read_jsons(blocking=True|False)</code> manually,
and organizing the results.</p>
<p><code>browser.run_output_thread()</code> starts another thread constantly printing
messages received from the browser but it can't be used with <code>asyncio</code>
nor will it play nice with any other read.</p>
<p>In other words, unless you're really, really sure you know what you're doing,
use <code>asyncio</code>.</p>
<h2 id="low-level-use">Low-Level Use</h2>
<p>We provide a <code>Browser</code> and <code>Tab</code> interface, but there are lower-level <code>Target</code>
and <code>Session</code> interfaces if needed.</p>













              </article>
            </div>


<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>

      </main>

        <footer class="md-footer">

  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">


    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>

</div>

    </div>
  </div>
</footer>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>


    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.indexes"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>


      <script src="assets/javascripts/bundle.88dd0f4e.min.js"></script>


  </body>
</html>
