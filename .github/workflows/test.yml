---
name: test-wf
on: pull_request
jobs:
  test-linux:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: astral-sh/setup-uv@v4
      - uses: actions/setup-python@v5
        with:
          python-version-file: "pyproject.toml"

      - name: Install Dependencies
        run:  sudo apt-get update && sudo apt-get install chromium-browser xvfb
        timeout-minutes: 4
      - name: Install choreographer
        run:  uv sync --all-extras
      - name: Diagnose
        run:  uv run choreo_diagnose --no-run
        timeout-minutes: 1
